(this.webpackJsonp=this.webpackJsonp||[]).push([[15,18,19,22],{117:function(t,e,n){"use strict";n.r(e),n.d(e,"ripple",(function(){return l}));var i=n(81),s=n(160),a=n(74),o=n(73);let r=0;function l(t,e=(()=>Promise.resolve()),n=null,l=!1){if(t.querySelector(".c-ripple"))return;t.classList.add("rp");let c=document.createElement("div");c.classList.add("c-ripple");let d;t.classList.contains("rp-square")&&c.classList.add("is-square"),t[l?"prepend":"append"](c);const u=(t,i)=>{const o=Date.now(),l=document.createElement("div"),u=r++,h=1e3*+window.getComputedStyle(c).getPropertyValue("--ripple-duration").replace("s","");d=()=>{let t=Date.now()-o;const e=()=>{s.a.mutate(()=>{l.remove()}),n&&n(u)};if(t<h){let n=Math.max(h-t,h/2);setTimeout(()=>l.classList.add("hiding"),Math.max(n-h/2,0)),setTimeout(e,n)}else l.classList.add("hiding"),setTimeout(e,h/2);a.IS_TOUCH_SUPPORTED||window.removeEventListener("contextmenu",d),d=null,p=!1},e&&e(u),window.requestAnimationFrame(()=>{const e=c.getBoundingClientRect();l.classList.add("c-ripple__circle");const n=t-e.left,s=i-e.top,a=Math.sqrt(Math.pow(Math.abs(s-e.height/2)+e.height/2,2)+Math.pow(Math.abs(n-e.width/2)+e.width/2,2)),o=n-a/2,r=s-a/2;l.style.width=l.style.height=a+"px",l.style.left=o+"px",l.style.top=r+"px",c.append(l)})},h=e=>e.target!==t&&(["BUTTON","A"].includes(e.target.tagName)||Object(i.a)(e.target,"c-ripple")!==c);let p=!1;if(a.IS_TOUCH_SUPPORTED){let e=()=>{d&&d()};t.addEventListener("touchstart",n=>{if(!o.default.settings.animationsEnabled)return;if(n.touches.length>1||p||h(n))return;p=!0;let{clientX:i,clientY:s}=n.touches[0];u(i,s),t.addEventListener("touchend",e,{once:!0}),window.addEventListener("touchmove",n=>{n.cancelBubble=!0,n.stopPropagation(),e(),t.removeEventListener("touchend",e)},{once:!0})},{passive:!0})}else t.addEventListener("mousedown",e=>{if(![0,2].includes(e.button))return;if(!o.default.settings.animationsEnabled)return;if("0"===t.dataset.ripple||h(e))return;if(p)return void(p=!1);let{clientX:n,clientY:i}=e;u(n,i),window.addEventListener("mouseup",d,{once:!0,passive:!0}),window.addEventListener("contextmenu",d,{once:!0,passive:!0})},{passive:!0})}},121:function(t,e,n){"use strict";n.r(e);var i=n(140),s=n(165),a=n(163),o=n(1),r=n(25),l=n(141),c=n(115),d=n(116),u=n(73),h=n(142),p=n(176),m=n(166),g=function(t,e,n,i){return new(n||(n=Promise))((function(s,a){function o(t){try{l(i.next(t))}catch(t){a(t)}}function r(t){try{l(i.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,r)}l((i=i.apply(t,e||[])).next())}))};let f;const v=new s.a("page-signQR",!0,()=>f,()=>{f||(f=g(void 0,void 0,void 0,(function*(){const t=v.pageEl.querySelector(".auth-image");let e=Object(h.f)(t,!0);const s=document.createElement("div");s.classList.add("input-wrapper");const d=Object(l.a)("btn-primary btn-secondary btn-primary-transparent primary",{text:"Login.QR.Cancel"});s.append(d),Object(p.a)(s);const b=t.parentElement,E=document.createElement("h4");Object(c._i18n)(E,"Login.QR.Title");const y=document.createElement("ol");y.classList.add("qr-description"),["Login.QR.Help1","Login.QR.Help2","Login.QR.Help3"].forEach(t=>{const e=document.createElement("li");e.append(Object(c.i18n)(t)),y.append(e)}),b.append(E,y,s),d.addEventListener("click",()=>{Promise.all([n.e(2),n.e(19)]).then(n.bind(null,119)).then(t=>t.default.mount()),L=!0});const w=(yield Promise.all([n.e(9).then(n.t.bind(null,195,7))]))[0].default;let L=!1;u.default.addEventListener("user_auth",()=>{L=!0,f=null},{once:!0});let O,T={ignoreErrors:!0};const S=s=>g(void 0,void 0,void 0,(function*(){try{let l=yield i.a.invokeApi("auth.exportLoginToken",{api_id:r.a.id,api_hash:r.a.hash,except_ids:[]},{ignoreErrors:!0});if("auth.loginTokenMigrateTo"===l._&&(T.dcId||(T.dcId=l.dc_id,i.a.setBaseDcId(l.dc_id)),l=yield i.a.invokeApi("auth.importLoginToken",{token:l.token},T)),"auth.loginTokenSuccess"===l._){const t=l.authorization;return i.a.setUser(t.user),n.e(3).then(n.bind(null,118)).then(t=>t.default.mount()),!0}if(!O||!Object(o.b)(O,l.token)){O=l.token;let n="et://login?token="+Object(o.e)(l.token).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"");const i=window.getComputedStyle(document.documentElement),s=i.getPropertyValue("--surface-color").trim(),a=i.getPropertyValue("--primary-text-color").trim(),r=i.getPropertyValue("--primary-color").trim(),c=yield fetch("assets/img/logo_padded.svg").then(t=>t.text()).then(t=>{t=t.replace(/(fill:).+?(;)/,`$1${r}$2`);const e=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return new Promise(t=>{const n=new FileReader;n.onload=e=>{t(e.target.result)},n.readAsDataURL(e)})}),d=new w({width:240*window.devicePixelRatio,height:240*window.devicePixelRatio,data:n,image:c,dotsOptions:{color:a,type:"rounded"},cornersSquareOptions:{type:"extra-rounded"},imageOptions:{imageSize:1,margin:0},backgroundOptions:{color:s},qrOptions:{errorCorrectionLevel:"L"}});let u;d.append(t),t.lastChild.classList.add("qr-canvas"),u=d._drawingPromise?d._drawingPromise:Promise.race([Object(m.a)(1e3),new Promise(t=>{d._canvas._image.addEventListener("load",()=>{window.requestAnimationFrame(()=>t())},{once:!0})})]),yield u.then(()=>{if(e){e.style.animation="hide-icon .4s forwards";const n=t.children[1];n.style.display="none",n.style.animation="grow-icon .4s forwards",setTimeout(()=>{n.style.display=""},150),setTimeout(()=>{n.style.animation=""},500),e=void 0}else Array.from(t.children).slice(0,-1).forEach(t=>{t.remove()})})}if(s){let t=Date.now()/1e3,e=l.expires-t-a.a.serverTimeOffset;yield Object(m.a)(e>3?3e3:1e3*e|0)}}catch(t){switch(t.type){case"SESSION_PASSWORD_NEEDED":console.warn("pageSignQR: SESSION_PASSWORD_NEEDED"),t.handled=!0,n.e(17).then(n.bind(null,120)).then(t=>t.default.mount()),L=!0,f=null;break;default:console.error("pageSignQR: default error:",t),L=!0}return!0}return!1}));return()=>g(void 0,void 0,void 0,(function*(){for(L=!1;!L&&!(yield S(!0)););}))}))),f.then(t=>{t()}),d.default.pushToState("authState",{_:"authStateSignQr"})});e.default=v},138:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return d}));var i=n(74),s=n(151);let a;function o(t){if(t.isTrusted&&"click"===t.type&&t.target!==a)return!0}document.addEventListener("mousedown",t=>{a=t.target});const r=i.IS_TOUCH_SUPPORTED?"mousedown":"click";function l(t,e,n={}){const i=n.listenerSetter?n.listenerSetter.add(t):t.addEventListener.bind(t);n.touchMouseDown=!0,i(r,e,n)}function c(t,e,n){t.removeEventListener(r,e,n)}function d(t){Object(s.a)(t,r)}},141:function(t,e,n){"use strict";var i=n(115),s=n(117);e.a=(t,e={})=>{const n=document.createElement(e.asDiv?"div":"button");return n.className=t+(e.icon?" tgico-"+e.icon:""),e.noRipple||(e.rippleSquare&&n.classList.add("rp-square"),Object(s.ripple)(n)),e.onlyMobile&&n.classList.add("only-handhelds"),e.disabled&&n.setAttribute("disabled","true"),e.text&&n.append(Object(i.i18n)(e.text)),n}},142:function(t,e,n){"use strict";n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return h})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return y})),n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return T}));var i=n(11),s=n(79),a=n(138),o=n(144),r=n(74),l=n(54),c=n(73),d=n(147);function u(t,e=!1){const n='\n  <svg xmlns="http://www.w3.org/2000/svg" class="preloader-circular" viewBox="25 25 50 50">\n  <circle class="preloader-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n  </svg>';if(e){const e=document.createElement("div");return e.classList.add("preloader"),e.innerHTML=n,t&&t.appendChild(e),e}return t.insertAdjacentHTML("beforeend",n),t.lastElementChild}function h(t,e="check"){return t.classList.remove("tgico-"+e),t.disabled=!0,u(t),()=>{t.innerHTML="",t.classList.add("tgico-"+e),t.removeAttribute("disabled")}}i.a.putPreloader=u;let p=t=>{let e=f.getBoundingClientRect(),{clientX:n,clientY:i}=t,s=n>=e.right?n-e.right:e.left-n,a=i>=e.bottom?i-e.bottom:e.top-i;(s>=100||a>=100)&&g()};const m=t=>{g()},g=()=>{f&&(f.classList.remove("active"),f.parentElement.classList.remove("menu-open"),b&&b.remove(),f=null,c.default.dispatchEvent("context_menu_toggle",!1)),v&&(v(),v=null),r.IS_TOUCH_SUPPORTED||(window.removeEventListener("mousemove",p),window.removeEventListener("contextmenu",m)),document.removeEventListener(a.a,m),l.IS_MOBILE_SAFARI||d.a.removeByType("menu")};window.addEventListener("resize",()=>{f&&g()});let f=null,v=null,b=null;function E(t,e){g(),l.IS_MOBILE_SAFARI||d.a.pushItem({type:"menu",onPop:t=>{g()}}),f=t,f.classList.add("active"),f.parentElement.classList.add("menu-open"),b||(b=document.createElement("div"),b.classList.add("btn-menu-overlay"),b.addEventListener(a.a,t=>{Object(s.a)(t),m()})),f.parentElement.insertBefore(b,f),v=e,r.IS_TOUCH_SUPPORTED||(window.addEventListener("mousemove",p),window.addEventListener("contextmenu",m,{once:!0})),document.addEventListener(a.a,m),c.default.dispatchEvent("context_menu_toggle",!0)}function y(t,e,n){t.touches&&(t=t.touches[0]);const{pageX:i,pageY:s}=t;let{scrollWidth:a,scrollHeight:r}=e;const l=document.body.getBoundingClientRect(),c=l.width,d=l.height;n=o.b.isMobile?"right":"left";let u="top";const h={x:{left:i,right:i-a},intermediateX:"right"===n?8:c-a-8,y:{top:s,bottom:s-r},intermediateY:s<d/2?8:d-r-8},p={left:h.x.left+a+8<=c,right:h.x.right>=8},m={top:h.y.top+r+8<=d,bottom:h.y.bottom-8>=8};{let t;t=p[n]?h.x[n]:(n="center",h.intermediateX),e.style.left=t+"px"}{let t;t=m[u]?h.y[u]:(u="center",h.intermediateY),e.style.top=t+"px"}e.className=e.className.replace(/(top|center|bottom)-(left|center|right)/g,""),e.classList.add(("center"===u?u:"bottom")+"-"+("center"===n?n:"left"===n?"right":"left"))}let w=!1,L=0;function O(){L&&clearTimeout(L),L=window.setTimeout(()=>{L=0,w=!1},400),w=!0}function T(t,e,n){const i=n?n.add(t):t.addEventListener.bind(t),a=n?n.removeManual.bind(n,t):t.removeEventListener.bind(t);if(l.IS_APPLE&&r.IS_TOUCH_SUPPORTED){let n;const o={capture:!0},r=()=>{clearTimeout(n),a("touchmove",r,o),a("touchend",r,o),a("touchcancel",r,o)};i("touchstart",a=>{a.touches.length>1?r():(i("touchmove",r,o),i("touchend",r,o),i("touchcancel",r,o),n=window.setTimeout(()=>{w?r():(e(a),r(),f&&!f.classList.contains("contextmenu")&&t.addEventListener("touchend",s.a,{once:!0}))},400))})}else i("contextmenu",r.IS_TOUCH_SUPPORTED?n=>{e(n),f&&t.addEventListener("touchend",s.a,{once:!0})}:e)}},143:function(t,e,n){"use strict";function i(t,e){if("string"==typeof e)return void(t.innerHTML=e);const n=t.firstChild;n?t.lastChild===n?n.replaceWith(e):(t.textContent="",t.append(e)):t.append(e)}n.d(e,"a",(function(){return i}))},145:function(t,e,n){"use strict";function i(t,e){t.setAttribute("dir","auto"),"string"==typeof e?e?t.innerHTML=e:t.textContent="":(t.textContent="",t.append(e))}n.d(e,"a",(function(){return i}))},146:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(151),s=n(154),a=n(158),o=n(150),r=n(164);var l=n(145),c=n(115),d=n(139),u=n(148);let h=()=>{document.addEventListener("paste",t=>{if(!Object(a.a)(t.target,'contenteditable="true"'))return;let e,n;t.preventDefault();let i=(t.originalEvent||t).clipboardData.getData("text/plain"),r=!0,l=(t.originalEvent||t).clipboardData.getData("text/html");if(l.trim()){l=l.replace(/<style([\s\S]*)<\/style>/,""),l=l.replace(/<!--([\s\S]*)-->/,"");const t=l.match(/<body>([\s\S]*)<\/body>/);t&&(l=t[1].trim());let s=document.createElement("span");s.innerHTML=l;let a=s.firstChild;for(;a;){let t=a.nextSibling;3===a.nodeType&&(a.nodeValue.trim()||a.remove()),a=t}const c=Object(o.a)(s,!0);if(c.value.replace(/\s/g,"").length===i.replace(/\s/g,"").length){e=c.value,n=c.entities,r=!1;let t=d.b.parseEntities(e);t=t.filter(t=>"messageEntityEmoji"===t._||"messageEntityLinebreak"===t._),d.b.mergeEntities(n,t)}}r&&(e=i,n=d.b.parseEntities(e),n=n.filter(t=>"messageEntityEmoji"===t._||"messageEntityLinebreak"===t._));const c=d.b.wrapDraftText(e,{entities:n});e=Object(s.a)(c),window.document.execCommand("insertHTML",!1,e)}),h=null};var p;!function(t){t[t.Neutral=0]="Neutral",t[t.Valid=1]="Valid",t[t.Error=2]="Error"}(p||(p={}));e.b=class{constructor(t={}){this.options=t,this.container=document.createElement("div"),this.container.classList.add("input-field"),this.required=t.required,this.validate=t.validate,void 0!==t.maxLength&&void 0===t.showLengthOn&&(t.showLengthOn=Math.min(40,Math.round(t.maxLength/3)));const{placeholder:e,maxLength:n,showLengthOn:i,name:s,plainText:a,canBeEdited:l=!0}=t;let d,u,p=t.label||t.labelText;if(a)this.container.innerHTML=`\n      <input type="text" ${s?`name="${s}"`:""} autocomplete="off" ${p?'required=""':""} class="input-field-input">\n      `,d=this.container.firstElementChild;else{h&&h(),this.container.innerHTML='\n      <div contenteditable="true" class="input-field-input"></div>\n      ',d=this.container.firstElementChild,d.contentEditable=""+!!l;const e=new MutationObserver(()=>{u&&u()});d.addEventListener("input",()=>{Object(r.a)(d)&&(d.innerHTML=""),this.inputFake&&(this.inputFake.innerHTML=d.innerHTML,this.onFakeInput())}),e.observe(d,{characterData:!0,childList:!0,subtree:!0}),t.animate&&(d.classList.add("scrollable","scrollable-y"),this.inputFake=document.createElement("div"),this.inputFake.setAttribute("contenteditable","true"),this.inputFake.className=d.className+" input-field-input-fake")}if(d.setAttribute("dir","auto"),e&&(Object(c._i18n)(d,e,void 0,"placeholder"),this.inputFake&&Object(c._i18n)(this.inputFake,e,void 0,"placeholder")),p||e){const t=document.createElement("div");t.classList.add("input-field-border"),this.container.append(t)}if(p&&(this.label=document.createElement("label"),this.setLabel(),this.container.append(this.label)),n){const t=this.container.lastElementChild;let e=!1;u=()=>{const s=d.classList.contains("error"),r=a?d.value.length:[...Object(o.a)(d,!1).value].length,l=n-r,c=l<0;d.classList.toggle("error",c),c||l<=i?(this.setLabel(),t.append(` (${n-r})`),e||(e=!0)):(s&&!c||e)&&(this.setLabel(),e=!1)},d.addEventListener("input",u)}this.input=d}select(){this.value&&(this.options.plainText?this.input.select():function(t){const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e)}(this.input))}setLabel(){this.label.textContent="",this.options.labelText?Object(l.a)(this.label,this.options.labelText):this.label.append(Object(c.i18n)(this.options.label,this.options.labelOptions))}onFakeInput(t=!0){const{scrollHeight:e}=this.inputFake,n=+this.input.style.height.replace("px","");if(n===e)return;const i=Math.round(50*Math.log(Math.abs(e-n)));this.input.style.transitionDuration=i+"ms",t&&(this.input.style.height=e?e+"px":"");Object(u.a)(this.input,"is-changing-height",!0,i,()=>{this.input.classList.remove("is-changing-height")})}get value(){return this.options.plainText?this.input.value:Object(o.a)(this.input,!1).value}set value(t){this.setValueSilently(t,!1),Object(i.a)(this.input,"input")}setValueSilently(t,e=!0){this.options.plainText?this.input.value=t:(this.input.innerHTML=t,this.inputFake&&(this.inputFake.innerHTML=t,e&&this.onFakeInput()))}isChanged(){return this.value!==this.originalValue}isValid(){return!this.input.classList.contains("error")&&(!this.validate||this.validate())&&(!this.required||!Object(r.a)(this.input))}isValidToChange(){return this.isValid()&&this.isChanged()}setDraftValue(t="",e=!1){this.options.plainText||(t=Object(s.a)(d.b.wrapDraftText(t))),e?this.setValueSilently(t,!1):this.value=t}setOriginalValue(t="",e=!1){this.originalValue=t,this.setDraftValue(t,e)}setState(t,e){e&&(this.label.textContent="",this.label.append(Object(c.i18n)(e,this.options.labelOptions))),this.input.classList.toggle("error",!!(t&p.Error)),this.input.classList.toggle("valid",!!(t&p.Valid))}setError(t){this.setState(p.Error,t)}}},147:function(t,e,n){"use strict";var i=n(11),s=n(54),a=n(24),o=n(85),r=n(79),l=n(82),c=n(167);const d=new class{constructor(){if(this.onPopState=t=>{const e=window.location.hash,n=t.state;if(this.debug&&this.log("popstate",t,this.isPossibleSwipe,e),e!==this.currentHash)if(this.debug&&this.log.warn(`hash changed, new=${e}, current=${this.currentHash}, overridden=${this.overriddenHash}`),n===this.id&&this.overriddenHash&&this.overriddenHash!==e)this.overrideHash(this.overriddenHash);else{if(!n||this.overriddenHash||!e)return this.currentHash=e,void(this.onHashChange&&this.onHashChange());this.overrideHash()}if(n!==this.id&&(this.pushState(),!this.navigations.length))return;const i=this.navigations.pop();i?(this.manual=!this.isPossibleSwipe,this.handleItem(i,this.navigations.length)):this.pushState()},this.onTouchStart=t=>{t.touches.length>1||(this.debug&&this.log("touchstart"),Object(c.a)(t)&&(this.isPossibleSwipe=!0,window.addEventListener("touchend",()=>{setTimeout(()=>{this.isPossibleSwipe=!1},100)},{passive:!0,once:!0})))},this.navigations=[],this.id=Date.now(),this.manual=!1,this.log=Object(a.b)("NC"),this.debug=!0,this.currentHash=window.location.hash,this.overriddenHash="",this.isPossibleSwipe=!1,window.addEventListener("popstate",this.onPopState),window.addEventListener("keydown",t=>{const e=this.navigations[this.navigations.length-1];e&&("Escape"!==t.key||e.onEscape&&!e.onEscape()||(Object(r.a)(t),this.back(e.type)))},{capture:!0,passive:!1}),s.IS_MOBILE_SAFARI){const t={passive:!0};window.addEventListener("touchstart",this.onTouchStart,t)}history.scrollRestoration="manual",this.pushState()}overrideHash(t=""){t&&"#"!==t[0]?t="#"+t:"#"===t&&(t=""),this.currentHash!==t&&(this.overriddenHash=this.currentHash=t,this.replaceState(),this.pushState())}handleItem(t,e=this.navigations.indexOf(t)){const n=t.onPop(!!this.manual&&void 0);this.debug&&this.log("popstate, navigation:",t,this.navigations),!1===n?this.spliceItems(Math.min(this.navigations.length,e),0,t):t.noBlurOnPop||Object(o.a)(),this.manual=!1}findItemByType(t){for(let e=this.navigations.length-1;e>=0;--e){const n=this.navigations[e];if(n.type===t)return{item:n,index:e}}}back(t){if(t){const e=this.findItemByType(t);if(e)return this.manual=!0,this.navigations.splice(e.index,1),void this.handleItem(e.item)}history.back()}onItemAdded(t){this.debug&&this.log("onItemAdded",t,this.navigations),t.noHistory||this.pushState()}pushItem(t){this.navigations.push(t),this.onItemAdded(t)}spliceItems(t,e,...n){this.navigations.splice(t,e,...n),n.forEach(t=>{this.onItemAdded(t)})}pushState(){this.manual=!1,history.pushState(this.id,"")}replaceState(){this.debug&&this.log.warn("replace");const t=location.origin+location.pathname+location.search+this.overriddenHash;history.replaceState(this.id,"",t)}removeItem(t){Object(l.f)(this.navigations,t)}removeByType(t,e=!1){for(let n=this.navigations.length-1;n>=0;--n){if(this.navigations[n].type===t&&(this.navigations.splice(n,1),e))break}}};i.a.appNavigationController=d,e.a=d},148:function(t,e,n){"use strict";var i=n(73);const s=(t,e,n,a,o,r)=>{const{timeout:l,raf:c}=t.dataset;if(void 0!==l&&clearTimeout(+l),void 0!==c&&(window.cancelAnimationFrame(+c),r||delete t.dataset.raf),r&&i.default.settings.animationsEnabled&&a)return void(t.dataset.raf=""+window.requestAnimationFrame(()=>{delete t.dataset.raf,s(t,e,n,a,o,r-1)}));n&&e&&t.classList.add(e);const d=()=>{delete t.dataset.timeout,!n&&e&&t.classList.remove("backwards",e),t.classList.remove("animating"),o&&o()};if(!i.default.settings.animationsEnabled||!a)return t.classList.remove("animating","backwards"),void d();t.classList.add("animating"),t.classList.toggle("backwards",!n),t.dataset.timeout=""+setTimeout(d,a)};e.a=s},150:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(11),s=n(139),a=n(159);function o(t,e=!0){const n=[],i=[],o=e?[]:void 0;Object(a.a)(t,n,i,void 0,void 0,o),i.length&&n.push(i.join(""));let r=n.join("\n");return r=r.replace(/\u00A0/g," "),o&&s.b.combineSameEntities(o),{value:r,entities:o}}i.a.getRichValue=o},151:function(t,e,n){"use strict";function i(t,e){const n=new Event(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}n.d(e,"a",(function(){return i}))},154:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(156);function s(t){return Array.from(t.childNodes).map(t=>t.nodeType===t.TEXT_NODE?Object(i.d)(t.textContent):t.outerHTML).join("")}},157:function(t,e,n){"use strict";function i(t,e){return e?t.forEach(t=>t.setAttribute("disabled","true")):t.forEach(t=>t.removeAttribute("disabled")),()=>i(t,!e)}n.d(e,"a",(function(){return i}))},158:function(t,e,n){"use strict";function i(t,e){return t.closest(`[${e}]`)}n.d(e,"a",(function(){return i}))},159:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));const i={bold:{match:'[style*="font-weight"], b',entityName:"messageEntityBold"},underline:{match:'[style*="underline"], u',entityName:"messageEntityUnderline"},italic:{match:'[style*="italic"], i',entityName:"messageEntityItalic"},monospace:{match:'[style*="monospace"], [face="monospace"], pre',entityName:"messageEntityPre"},strikethrough:{match:'[style*="line-through"], strike',entityName:"messageEntityStrike"},link:{match:"A:not(.follow)",entityName:"messageEntityTextUrl"},mentionName:{match:"A.follow",entityName:"messageEntityMentionName"}};function s(t,e,n,a,o,r,l={offset:0}){if(3===t.nodeType){const e=t.nodeValue;if(a===t?n.push(e.substr(0,o)+""+e.substr(o)):n.push(e),r&&e.trim()&&t.parentNode){const n=t.parentElement;for(const t in i){const s=i[t],a=n.closest(s.match+", [contenteditable]");a&&null===a.getAttribute("contenteditable")&&("messageEntityTextUrl"===s.entityName?r.push({_:s.entityName,url:n.href,offset:l.offset,length:e.length}):"messageEntityMentionName"===s.entityName?r.push({_:s.entityName,offset:l.offset,length:e.length,user_id:n.dataset.follow.toUserId()}):r.push({_:s.entityName,offset:l.offset,length:e.length}))}}return void(l.offset+=e.length)}if(1!==t.nodeType)return;const c=a===t,d="DIV"===t.tagName||"P"===t.tagName;if(d&&n.length||"BR"===t.tagName)e.push(n.join("")),n.splice(0,n.length);else if(t instanceof HTMLImageElement){const e=t.alt;e&&(n.push(e),l.offset+=e.length)}c&&!o&&n.push("");let u=t.firstChild;for(;u;)s(u,e,n,a,o,r,l),u=u.nextSibling;c&&o&&n.push(""),d&&n.length&&(e.push(n.join("")),n.splice(0,n.length))}},160:function(t,e,n){"use strict";var i=n(83),s=n(48),a=n(11),o=n(161);const r=new class{constructor(){this.promises={},this.raf=i.b.bind(null),this.scheduled=!1}do(t,e){let n=this.promises[t];return n||(this.scheduleFlush(),n=this.promises[t]=Object(s.a)()),void 0!==e&&n.then(()=>e()),n}measure(t){return this.do("read",t)}mutate(t){return this.do("write",t)}mutateElement(t,e){const n=Object(o.a)(t)?this.mutate():Promise.resolve();return void 0!==e&&n.then(()=>e()),n}scheduleFlush(){this.scheduled||(this.scheduled=!0,this.raf(()=>{this.promises.read&&this.promises.read.resolve(),this.promises.write&&this.promises.write.resolve(),this.scheduled=!1,this.promises={}}))}};a.a&&(a.a.sequentialDom=r),e.a=r},163:function(t,e,n){"use strict";var i=n(11),s=n(17),a=n(140);const o=new class{constructor(){this.serverTimeOffset=0,s.a.get("server_time_offset").then(t=>{t&&(this.serverTimeOffset=t)}),a.a.addTaskListener("applyServerTimeOffset",t=>{this.serverTimeOffset=t.payload})}};i.a&&(i.a.serverTimeManager=o),e.a=o},164:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(150);function s(t){return t.hasAttribute("contenteditable")||"INPUT"!==t.tagName?!Object(i.a)(t,!1).value.trim():!t.value.trim()}},167:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(54);function s(t){return i.IS_MOBILE_SAFARI&&t instanceof TouchEvent&&t.touches[0].clientX<30}},176:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(79),s=n(138),a=n(89),o=n(115),r=n(140),l=n(73),c=n(141),d=n(142);let u,h=!1;function p(t){h||(u||(u=r.a.getConfig().then(t=>t.suggested_lang_code!==o.default.lastRequestedLangCode?Promise.all([t,o.default.getStrings(t.suggested_lang_code,["Login.ContinueOnLanguage"]),o.default.getCacheLangPack()]):[]))).then(([e,n])=>{if(!e)return;const r=[];n.forEach(t=>{const e=o.default.strings.get(t.key);e&&(r.push(e),o.default.strings.set(t.key,t))});const u=Object(c.a)("btn-primary btn-secondary btn-primary-transparent primary",{text:"Login.ContinueOnLanguage"});u.lastElementChild.classList.remove("i18n"),Object(a.a)().then(()=>{window.requestAnimationFrame(()=>{t.append(u)})}),l.default.addEventListener("language_change",()=>{u.remove()},{once:!0}),r.forEach(t=>{o.default.strings.set(t.key,t)}),Object(s.b)(u,t=>{Object(i.a)(t),h=!0,u.disabled=!0,Object(d.f)(u),o.default.getLangPack(e.suggested_lang_code)})})}}}]);